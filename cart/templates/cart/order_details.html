{% extends 'allsellapp/base.html' %}
{% load static %}
{% load custom_filters %}



{% block content %}
<script src="https://unpkg.com/@dotlottie/player-component@latest/dist/dotlottie-player.mjs" type="module"></script> 
<section class="vh-100 gradient-custom-2">
    <div class="container shadow-container my-4 py-5" style="height: max-content;">
      {% if order.completed %}
      <div class="d-flex justify-content-evenly align-items-center flex-column">
        <h1 class="bold">Thank you for your purchase!</h1>
        <dotlottie-player src="https://lottie.host/3e3d3edb-2acd-4e2c-b7ab-3610a1f20554/RutvgSpmnK.json" background="transparent" speed="2.5" style="width: 300px; height: 300px;" autoplay></dotlottie-player>
      </div>
      {% endif %}
      <div class="row d-flex justify-content-center align-items-center h-100">
        <div class="col-md-10 col-lg-8 col-xl-6">
          <div class="card card-stepper" style="border-radius: 16px;">
            <div class="card-header p-4">
              <div class="d-flex justify-content-between align-items-center">
                <div>
                  <p class="text-muted mb-2"> Order ID: <span class="fw-bold text-body">{{order.reference_number}}</span></p>
                  <p class="text-muted mb-2"> Placed On: <span class="fw-bold text-body">{{order.start_date}}</span> </p>
                  {% if order.completed %}
                    <p class="text-muted mb-0"> Status: <span class="fw-bold text-body">completed</span> </p>
                  {% endif %}
                  <a href="{% url 'export_order_receipt_pdf' %}" class="btn btn-primary mt-4">Download receipt</a>
                </div>
              </div>
            </div>
            {% for item in items %}
            <div class="card-body p-4">
              <div class="d-flex flex-row mb-4 pb-2">
                <div class="flex-fill">
                  <h5 class="bold">{{item.product.product_name}}</h5>
                  <p class="text-muted"> Qt: {{item.quantity}} item(s)</p>
                  <h4 class="mb-3"> {{item.total_amount}} <span class="small text-muted"> via Paypal </span></h4>
                  <p class="text-muted">Tracking Status on: <span class="text-body">{{order.completed_date}}</span></p>
                </div>
                <div>
                  <img class="align-self-center img-fluid rounded-2"
                    src="{{item.product.productimg_set.first.product_img.url}}" width="250">
                </div>
              </div>
            </div>
            {% endfor %}
            <div class="card-footer p-4">
              <div class="d-flex justify-content-between">
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
{% endblock %}
