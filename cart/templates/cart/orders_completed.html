{% extends 'allsellapp/base.html' %}
{% load static %}
{% load custom_filters %}


{% block content %}
  <script src="https://cdn.tailwindcss.com"></script>
<section>
  <div class="container shadow-container p-5 mt-4">
    <div class="d-flex justify-content-center align-items-center mb-3">
      <h1 class="bold">History of completed orders</h1>
    </div>
    <a href="{% url 'export_orders_csv' %}" class="btn btn-primary my-4">Export to CSV</a>
    <table class="table table-hover">
      <thead class="table-dark">
        <tr>
          <th scope="col">ORDER ID</th>
          <th scope="col">TOTAL AMOUNT</th>
          <th scope="col">ITEMS</th>
          <th scope="col">ORDER STATUS</th>
          <th scope="col">ORDER STARTED</th>
          <th scope="col">ORDER COMPLETED</th>
          <th scope="col"></th>
        </tr>
      </thead>
      <tbody>
        {% for order in orders %}
          {% if order.completed %}
          <tr>
            <td><a href="{{order.get_absolute_url}}">{{order.reference_number}}</a></td>
            <td>{{order.get_cart_total}}</td>
            <td>{{order.get_cart_items}}</td>
            <td>Success</td>
            <td>{{order.start_date}}</td>
            <td>{{order.completed_date}}</td>
            <td><i class="bi bi-file-earmark"></i></td>
          </tr>
          {% endif %}
        {% endfor %}
      </tbody>
    </table>
      </div>
</section>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
{% endblock %}
